"use strict";!function(){function LovefieldFactory(schemaBuilder,$q){function getDB(){return angular.isDefined(db)?$q.resolve(db):(dbPromise||(dbPromise=schemaBuilder.connect().then(function(connection){return db=connection})["catch"](function(err){console.error("cannot connect to lovefield DB!")})),dbPromise)}function clearDB(){getDB().then(function(db){var tables=db.getSchema().tables();tables.forEach(function(table){return db["delete"]().from(table).exec()})})}var db,dbPromise;return{getDB:getDB,clearDB:clearDB}}angular.module("kutomer.ng-lovefield",[]).provider("lovefield",function(){var schemaBuilder;this.create=function(name,version){if(angular.isUndefined(lf))throw new Error("lovefield is not defined!");return schemaBuilder=lf.schema.create(name,version)},this.Type=lf.Type,this.$get=["$q",function($q){return LovefieldFactory(schemaBuilder,$q)}]})}();